{% macro disappring_btn(text, rbtn_id, relm_id, class='') -%}
    <button class='{{ class }} btn-rounded disappring-btn'
            data-toggle='collapse'
            data-target='#{{ relm_id }}'
            id={{ rbtn_id }}>
        {{ text }}
    </button>
{%- endmacro %}


{% macro result_item(index = 0, author='', title='', books={}, refs=[], num='') -%}
    {% set relm_id='refs'~num %}
    {% set rbtn_id='refsbtn'~num %}
    <div class="container-fluid">
        <h4 class="display-inline">
            {{ index }}. <em>{{ title }} </em> - {{ author }}
        </h4>
        <a href="#link" class="btn btn-sm btn-primary float-right" role="button"> For more information </a>
{#        <h6 class="padding-top-1">Referenced in books:</h6>#}
        <div class="padding-1">
            {% for bib, book in books.items() %}
                <div class="padding-bot-1">
                    <em><strong>{{ book.title_full.title }}</strong></em>
                    <span class="padding-1">
                        pages:
                        {% for page in book.pages -%}
                            <a href="{{ link|value_or_empty }}"> {{ page }} </a>
                            {% if not loop.last %}, {% endif %}
                        {%- endfor %}
                    </span>

                </div>
            {% endfor %}
        </div>

        <span class="padding-bot-2">
            <em class="collapse inline padding-left-2" id={{ relm_id }}> {{ refs }} </em>
            {{ disappring_btn( text='references: ', rbtn_id = rbtn_id, relm_id = relm_id, class='btn-sm') }}
        </span>
    </div>
{%- endmacro %}

<!-- Category Title Macro -->
{% macro category_head(category='', id='', res_num='', value='') -%}
    <div class="container-fluid padding-bot-2 popover_ctgry" id="{{ id }}">
        <div class="col-12  bgn-light-second"> <!--todo move the style to css-->
            <h1 class="">{{ category }} {{ res_num }}</h1>
            {#            <h1 class="display-4 welcome text-center">Tiresias: The Ancient Mediterranean Religions Source Database</h1>#}
        </div>
    </div>
{%- endmacro %}


<!-- Result Checkbox List Item Macro -->
{% macro checkbox_input(label='', id='', name='', value='') -%}
    <div class='form-group custom-control custom-switch text-left'>
        {#        <input type='{{ type }}' class='form-control' id='{{ id }}' name='{{ name }}'#}
        <input type='checkbox' class='custom-control-input' id='{{ id }}' name='{{ name }}'
               value="{{ value }}" checked>
        <label for='{{ id }}' class='custom-control-label padding-bot-2'>{{ label }}</label>
    </div>
{%- endmacro %}

<!-- Result Subject Checkbox List -->
{% if total %}
    <div class='container'>
        <div class='form-group padding-bot-2 col-9'>
            {# Rows must be placed within a .container (fixed-width) or .container-fluid (full-width) for proper alignment and padding. #}
            {#  --   Select All  --   #}
            <div class='custom-control custom-switch text-left'>
                <input type='checkbox' class='custom-control-input' id='checkAll' checked
                       onClick='filter_check_all(this)'>
                <label class='custom-control-label padding-bot-2' for='checkAll'>
                    <em><strong>Select All the Results</strong></em><br>
                </label>
                <form action='#' method='POST'>
                    {#  --   The Result subjects  --   #}
                    {% for item in results %}
                        {{ checkbox_input(label=item.subject, id=item.subject, name='filter-opt', value=item.C) }}<br>
                    {% endfor %}
                </form>
            </div>
        </div>
    </div>
{% endif %}
