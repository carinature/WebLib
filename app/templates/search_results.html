{% extends 'layout.html' %}
{% from 'macros.html' import result_item, category_head %}

{% block app_content %}
    {% if 'get'==method %}
        {% include 'search_bar.html' %}
    {% else %}
        <div class="container-fluid padding-bot-2">
            <div class="row">
                <!-------- Title & Results Info ------------>
                <span class="col-lg-4 text-center ">
                <h1 class="display-4 head-title padding-bot-2">
                    There are {{ results_num }} results for: <em>{{ search_word }}</em></h1>
                <h6>{{ categories[0]['results']|length }} are <a href="#high">highly validated</a> results.</h6>
                <h6>{{ categories[1]['results']|length }} are <a href="#valid">validated</a> results.</h6>
                <h6>{{ categories[2]['results']|length }} are <a href="#not">unvalidated</a> results.</h6>
            </span>

                <!-------- Search & Filter Forms ------------>
                <span class="col-lg-8">
                {% include 'search_bar.html' %}
                {#              {% include 'srchbr.html' %} #}
            </span>
            </div>
            <hr>
        </div>
        <!-------- Validation Category Sections ------------>
        {% for category in categories %}
            {{ category_head(category['name'], category['id']) }}
            <div class="category-padding">
                {% if not category['results'] %}
                    <h3>No results in this category.</h3>
                    <h4>Try using a different filter or search word.</h4>
                {% endif %}
                {% set outer_loop = loop %}
                {% for res in category['results'] %}
                    <!-------- Results (Per Category) ------------>
                    {{ result_item(
                    index = loop.index,
                    author=res.author,
                    title=res.title,
                    books=res.books,
                    refs=res.refs,
                    num=res.num) }}

                    <br>
                    <br>
                    {#            {% set elm_id=num %}#}
                    {#            {% set btn_id='btn'~num %}#}
                    {#            <button id={{ btn_id }} class="padding bgn-dark" #}
                    {#                    onclick="more_less_info('{{ btn_id }}','{{ elm_id }}')">Show More#}
                    {#            </button>#}
                    {#            <br><br>#}
                    {#            <p   class="display-none" id={{ elm_id }}>#}
                    {#                preview of the text (???)#}
                    {#            </p>#}
                {% endfor %}
            </div>
        {% endfor %}
    {% endif %}

{% endblock %}
